# –°–∫—Ä–∏–ø—Ç –¥–ª—è –ø–∞–∫–µ—Ç–Ω–æ–≥–æ –ø–µ—Ä–µ–≤–æ–¥–∞ —Ç–µ–∫—Å—Ç–∞ RU‚ÜíEN –≤ CSV-—Ñ–∞–π–ª–∞—Ö —Å –ø–æ–º–æ—â—å—é AI/–Ω–µ–π—Ä–æ—Å–µ—Ç–∏  
*(English description below)*  

üá∑üá∫ –≠—Ç–æ—Ç README —Å–Ω–∞—á–∞–ª–∞ –Ω–∞ —Ä—É—Å—Å–∫–æ–º, –Ω–∏–∂–µ ‚Äî –∞–Ω–≥–ª–∏–π—Å–∫–∞—è –≤–µ—Ä—Å–∏—è.  

–≠—Ç–æ—Ç —Å–∫—Ä–∏–ø—Ç –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –ø–µ—Ä–µ–≤–æ–¥–∞ —Ä—É—Å—Å–∫–æ—è–∑—ã—á–Ω–æ–≥–æ —Ç–µ–∫—Å—Ç–∞ –Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–∏–π —è–∑—ã–∫ –≤–Ω—É—Ç—Ä–∏ –±–æ–ª—å—à–∏—Ö CSV-—Ñ–∞–π–ª–æ–≤. –û–Ω –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —Ñ–∞–π–ª–∞–º–∏ –æ–±—ä–µ–º–æ–º –≤ —Å–æ—Ç–Ω–∏ –º–µ–≥–∞–±–∞–π—Ç –∏ –º–∏–ª–ª–∏–æ–Ω—ã —Å—Ç—Ä–æ–∫, —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ –∏—Å–ø–æ–ª—å–∑—É—è —Ä–µ—Å—É—Ä—Å—ã –≥—Ä–∞—Ñ–∏—á–µ—Å–∫–æ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞ (GPU) –¥–ª—è —É—Å–∫–æ—Ä–µ–Ω–∏—è –ø—Ä–æ—Ü–µ—Å—Å–∞.

## –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

* **–û–±—Ä–∞–±–æ—Ç–∫–∞ –±–æ–ª—å—à–∏—Ö —Ñ–∞–π–ª–æ–≤:** –°–∫—Ä–∏–ø—Ç —á–∏—Ç–∞–µ—Ç –∏—Å—Ö–æ–¥–Ω—ã–π —Ñ–∞–π–ª –ø–æ —á–∞—Å—Ç—è–º (—á–∞–Ω–∫–∞–º–∏), —á—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å —Ñ–∞–π–ª—ã, –ø—Ä–µ–≤—ã—à–∞—é—â–∏–µ –æ–±—ä–µ–º –æ–ø–µ—Ä–∞—Ç–∏–≤–Ω–æ–π –ø–∞–º—è—Ç–∏.
* **–£—Å–∫–æ—Ä–µ–Ω–∏–µ –Ω–∞ GPU:** –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –±–∏–±–ª–∏–æ—Ç–µ–∫—É PyTorch –∏ Hugging Face Transformers –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –≤—ã—á–∏—Å–ª–µ–Ω–∏–π –Ω–∞ –≤–∏–¥–µ–æ–∫–∞—Ä—Ç–µ NVIDIA (CUDA), —á—Ç–æ –º–Ω–æ–≥–æ–∫—Ä–∞—Ç–Ω–æ —É—Å–∫–æ—Ä—è–µ—Ç –ø–µ—Ä–µ–≤–æ–¥.
* **–ü–∞–∫–µ—Ç–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ (Batching):** –î–ª—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ GPU, —Å–∫—Ä–∏–ø—Ç —Å–æ–±–∏—Ä–∞–µ—Ç —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ —Ñ—Ä–∞–∑—ã –∏ –ø–µ—Ä–µ–≤–æ–¥–∏—Ç –∏—Ö –±–æ–ª—å—à–∏–º–∏ –ø–∞–∫–µ—Ç–∞–º–∏.
* **–ò–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω–æ–µ –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞:** –° –ø–æ–º–æ—â—å—é —Ä–µ–≥—É–ª—è—Ä–Ω—ã—Ö –≤—ã—Ä–∞–∂–µ–Ω–∏–π –Ω–∞—Ö–æ–¥–∏—Ç –∏ –ø–µ—Ä–µ–≤–æ–¥–∏—Ç —Ç–æ–ª—å–∫–æ —Ä—É—Å—Å–∫–æ—è–∑—ã—á–Ω—ã–µ —Ñ—Ä–∞–≥–º–µ–Ω—Ç—ã, –Ω–µ –∑–∞—Ç—Ä–∞–≥–∏–≤–∞—è –∫–æ–¥, —Ä–∞–∑–º–µ—Ç–∫—É –∏ –¥—Ä—É–≥–∏–µ —Å–∏–º–≤–æ–ª—ã –≤ —Å—Ç—Ä–æ–∫–∞—Ö.
* **–ù–∞–¥–µ–∂–Ω–∞—è –∑–∞–ø–∏—Å—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞:** –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –º–µ—Ç–æ–¥—ã –¥–ª—è –∑–∞–ø–∏—Å–∏ –¥–∞–Ω–Ω—ã—Ö, –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞—è –æ—à–∏–±–∫–∏ –Ω–µ—Ö–≤–∞—Ç–∫–∏ –ø–∞–º—è—Ç–∏ (`MemoryError`) –Ω–∞ —Ñ–∏–Ω–∞–ª—å–Ω–æ–º —ç—Ç–∞–ø–µ.
* **–ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º–æ—Å—Ç—å:** –ö–ª—é—á–µ–≤—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã, —Ç–∞–∫–∏–µ –∫–∞–∫ —Ä–∞–∑–º–µ—Ä—ã —á–∞–Ω–∫–æ–≤ –∏ –ø–∞–∫–µ—Ç–æ–≤, –≤—ã–Ω–µ—Å–µ–Ω—ã –≤ –±–ª–æ–∫ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –¥–ª—è –ª–µ–≥–∫–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ–¥ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é —Å–∏—Å—Ç–µ–º—É.

## –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

–î–ª—è —Ä–∞–±–æ—Ç—ã —Å–∫—Ä–∏–ø—Ç–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º Python 3.x –∏ —Å–ª–µ–¥—É—é—â–∏–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏. –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –≤ requirements.txt. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∏—Ö –º–æ–∂–Ω–æ –∫–æ–º–∞–Ω–¥–æ–π:

```bash
pip install -r requirements.txt
```
**–í–∞–∂–Ω–æ:** –î–ª—è —Ä–∞–±–æ—Ç—ã –Ω–∞ GPU —É –≤–∞—Å –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ –≤–∏–¥–µ–æ–∫–∞—Ä—Ç–∞ NVIDIA –∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∞—è –≤–µ—Ä—Å–∏—è CUDA, —Å–æ–≤–º–µ—Å—Ç–∏–º–∞—è —Å –≤–∞—à–µ–π –≤–µ—Ä—Å–∏–µ–π PyTorch. –î–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ CUDA –Ω—É–∂–Ω–æ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å torch —Å–æ —Å–ª–µ–¥—É—é—â–∏–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏
```bash
pip install torch torchvision torchaudio --index-url https://download.pytorch.org/whl/cu118
```

## –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

–í—Å–µ –æ—Å–Ω–æ–≤–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤ –Ω–∞—á–∞–ª–µ —Å–∫—Ä–∏–ø—Ç–∞ –≤ –±–ª–æ–∫–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫.

* `MODEL_NAME`: –ù–∞–∑–≤–∞–Ω–∏–µ –º–æ–¥–µ–ª–∏ –¥–ª—è –ø–µ—Ä–µ–≤–æ–¥–∞ –∏–∑ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è Hugging Face. –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é `Helsinki-NLP/opus-mt-ru-en`.
* `INPUT_FILE`: –ò–º—è –∏—Å—Ö–æ–¥–Ω–æ–≥–æ CSV-—Ñ–∞–π–ª–∞.
* `OUTPUT_FILE`: –ò–º—è —Ñ–∞–π–ª–∞, –≤ –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω —Ä–µ–∑—É–ª—å—Ç–∞—Ç.
* `INPUT_ENCODING` / `OUTPUT_ENCODING`: –ö–æ–¥–∏—Ä–æ–≤–∫–∏ –∏—Å—Ö–æ–¥–Ω–æ–≥–æ –∏ –∫–æ–Ω–µ—á–Ω–æ–≥–æ —Ñ–∞–π–ª–æ–≤.
* `CHUNK_SIZE`: **–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—Ç—Ä–æ–∫**, —Å—á–∏—Ç—ã–≤–∞–µ–º—ã—Ö –∏–∑ –∏—Å—Ö–æ–¥–Ω–æ–≥–æ —Ñ–∞–π–ª–∞ –∑–∞ –æ–¥–∏–Ω —Ä–∞–∑. –≠—Ç–æ –∫–ª—é—á–µ–≤–æ–π –ø–∞—Ä–∞–º–µ—Ç—Ä –¥–ª—è –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∏ –Ω–∞–≥—Ä—É–∑–∫–∏ –Ω–∞ **CPU –∏ –æ–ø–µ—Ä–∞—Ç–∏–≤–Ω—É—é –ø–∞–º—è—Ç—å (RAM)**.
* `BATCH_SIZE`: **–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ñ—Ä–∞–∑**, –∫–æ—Ç–æ—Ä—ã–µ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –Ω–∞ **GPU**. –≠—Ç–æ –∫–ª—é—á–µ–≤–æ–π –ø–∞—Ä–∞–º–µ—Ç—Ä –¥–ª—è –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∏ –Ω–∞–≥—Ä—É–∑–∫–∏ –Ω–∞ **–≤–∏–¥–µ–æ–ø–∞–º—è—Ç—å (VRAM)**.
* `LOG_FILE` / `LOG_LEVEL`: –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è —Ñ–∞–π–ª–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è, –∫—É–¥–∞ –∑–∞–ø–∏—Å—ã–≤–∞—é—Ç—Å—è –≤—Å–µ —à–∞–≥–∏ –∏ –æ—à–∏–±–∫–∏.
* `USE_GPU`: `True` –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è GPU, `False` –¥–ª—è –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è CPU.

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

1.  –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω–æ–º –±–ª–æ–∫–µ —Å–∫—Ä–∏–ø—Ç–∞.
2.  –ü–æ–º–µ—Å—Ç–∏—Ç–µ –∏—Å—Ö–æ–¥–Ω—ã–π `input.csv` –≤ —Ç—É –∂–µ –ø–∞–ø–∫—É.
3.  –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç –∏–∑ –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏:
    ```bash
    python run_translator.py
    ```
4.  –ü—Ä–æ—Ü–µ—Å—Å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –±—É–¥–µ—Ç –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è —Å –ø–æ–º–æ—â—å—é –ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä–∞. –ü–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ –≤ —É–∫–∞–∑–∞–Ω–Ω–æ–º `OUTPUT_FILE` –ø–æ—è–≤–∏—Ç—Å—è –ø–µ—Ä–µ–≤–µ–¥–µ–Ω–Ω—ã–π —Ñ–∞–π–ª.

## –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ–¥

–ü—Ä–æ—Ü–µ—Å—Å —Ä–∞–±–æ—Ç—ã —Å–∫—Ä–∏–ø—Ç–∞ –º–æ–∂–Ω–æ —Ä–∞–∑–±–∏—Ç—å –Ω–∞ –Ω–µ—Å–∫–æ–ª—å–∫–æ –∫–ª—é—á–µ–≤—ã—Ö —ç—Ç–∞–ø–æ–≤:

**1. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∏ –∑–∞–≥—Ä—É–∑–∫–∞ –º–æ–¥–µ–ª–∏ (`main` –∏ `load_model`)**
   - –ü—Ä–∏ –∑–∞–ø—É—Å–∫–µ —Å–∫—Ä–∏–ø—Ç –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç —Å–∏—Å—Ç–µ–º—É –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è.
   - –í—ã–∑—ã–≤–∞–µ—Ç—Å—è —Ñ—É–Ω–∫—Ü–∏—è `load_model()`, –∫–æ—Ç–æ—Ä–∞—è –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –Ω–∞–ª–∏—á–∏–µ GPU.
   - –° –ø–æ–º–æ—â—å—é –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ `transformers` –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è —É–∫–∞–∑–∞–Ω–Ω–∞—è –Ω–µ–π—Ä–æ—Å–µ—Ç–µ–≤–∞—è –º–æ–¥–µ–ª—å (`Helsinki-NLP/opus-mt-ru-en`) –∏ –µ–µ —Ç–æ–∫–µ–Ω–∏–∑–∞—Ç–æ—Ä. –ú–æ–¥–µ–ª—å –ø–µ—Ä–µ–º–µ—â–∞–µ—Ç—Å—è –≤ –ø–∞–º—è—Ç—å –≤–∏–¥–µ–æ–∫–∞—Ä—Ç—ã.
   - –°–æ–∑–¥–∞–µ—Ç—Å—è –æ–±—ä–µ–∫—Ç `pipeline` ‚Äî —ç—Ç–æ –≤—ã—Å–æ–∫–æ—É—Ä–æ–≤–Ω–µ–≤—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å `transformers`, –∫–æ—Ç–æ—Ä—ã–π –∏–Ω–∫–∞–ø—Å—É–ª–∏—Ä—É–µ—Ç –≤—Å—é –ª–æ–≥–∏–∫—É —Ç–æ–∫–µ–Ω–∏–∑–∞—Ü–∏–∏, –ø–µ—Ä–µ–≤–æ–¥–∞ –∏ –ø–æ—Å—Ç–æ–±—Ä–∞–±–æ—Ç–∫–∏.

**2. –ß—Ç–µ–Ω–∏–µ —Ñ–∞–π–ª–∞ –ø–æ —á–∞—Å—Ç—è–º (`main`)**
   - –û—Å–Ω–æ–≤–Ω–æ–π —Ü–∏–∫–ª –≤ —Ñ—É–Ω–∫—Ü–∏–∏ `main` –Ω–µ –∑–∞–≥—Ä—É–∂–∞–µ—Ç –≤–µ—Å—å CSV-—Ñ–∞–π–ª –≤ –ø–∞–º—è—Ç—å.
   - –° –ø–æ–º–æ—â—å—é `itertools.islice` –æ–Ω —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ —Å—á–∏—Ç—ã–≤–∞–µ—Ç –∏–∑ —Ñ–∞–π–ª–∞ –ø–æ—Ä—Ü–∏—é —Å—Ç—Ä–æ–∫, —Ä–∞–≤–Ω—É—é `CHUNK_SIZE`. –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å —Å —Ñ–∞–π–ª–∞–º–∏ –ª—é–±–æ–≥–æ —Ä–∞–∑–º–µ—Ä–∞.
   - –ö–∞–∂–¥–∞—è —Ç–∞–∫–∞—è –ø–æ—Ä—Ü–∏—è —Å—Ç—Ä–æ–∫ –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç—Å—è –≤ `pandas.DataFrame` –¥–ª—è —É–¥–æ–±–Ω–æ–π –¥–∞–ª—å–Ω–µ–π—à–µ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏.

**3. –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ–¥–Ω–æ–≥–æ —á–∞–Ω–∫–∞ (`process_chunk`)**
   - –≠—Ç–∞ —Ñ—É–Ω–∫—Ü–∏—è —è–≤–ª—è–µ—Ç—Å—è —è–¥—Ä–æ–º –≤—Å–µ–π –ª–æ–≥–∏–∫–∏ –ø–µ—Ä–µ–≤–æ–¥–∞.
   - **–®–∞–≥ 3a: –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –∏ –¥–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—è —Ñ—Ä–∞–∑.**
     - –§—É–Ω–∫—Ü–∏—è –ø—Ä–æ—Ö–æ–¥–∏—Ç –ø–æ –∫–∞–∂–¥–æ–π —Å—Ç—Ä–æ–∫–µ –≤ DataFrame.
     - –° –ø–æ–º–æ—â—å—é —Ä–µ–≥—É–ª—è—Ä–Ω–æ–≥–æ –≤—ã—Ä–∞–∂–µ–Ω–∏—è `RUSSIAN_PATTERN` –æ–Ω–∞ –Ω–∞—Ö–æ–¥–∏—Ç –≤—Å–µ —Ñ—Ä–∞–≥–º–µ–Ω—Ç—ã, —Å–æ–¥–µ—Ä–∂–∞—â–∏–µ –∫–∏—Ä–∏–ª–ª–∏—Ü—É.
     - –í—Å–µ –Ω–∞–π–¥–µ–Ω–Ω—ã–µ —Ñ—Ä–∞–∑—ã –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è –≤ –æ–±—ä–µ–∫—Ç `set`. `Set` ‚Äî —ç—Ç–æ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö –≤ Python, –∫–æ—Ç–æ—Ä–∞—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ö—Ä–∞–Ω–∏—Ç —Ç–æ–ª—å–∫–æ **—É–Ω–∏–∫–∞–ª—å–Ω—ã–µ** –∑–Ω–∞—á–µ–Ω–∏—è. –≠—Ç–æ –≤–∞–∂–Ω–µ–π—à–∞—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è, –∫–æ—Ç–æ—Ä–∞—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –º–Ω–æ–≥–æ–∫—Ä–∞—Ç–Ω—ã–π –ø–µ—Ä–µ–≤–æ–¥ –æ–¥–Ω–æ–≥–æ –∏ —Ç–æ–≥–æ –∂–µ —Å–ª–æ–≤–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Å–ª–æ–≤–∞ "–æ—à–∏–±–∫–∞").
   - **–®–∞–≥ 3b: –ü–∞–∫–µ—Ç–Ω—ã–π –ø–µ—Ä–µ–≤–æ–¥ –Ω–∞ GPU.**
     - –£–Ω–∏–∫–∞–ª—å–Ω—ã–µ —Ñ—Ä–∞–∑—ã –∏–∑ `set` –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è –æ–¥–Ω–∏–º –±–æ–ª—å—à–∏–º —Å–ø–∏—Å–∫–æ–º –≤ –æ–±—ä–µ–∫—Ç `translator`.
     - –ó–¥–µ—Å—å –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –º–∞–≥–∏—è: `pipeline` —Ä–∞–∑–±–∏–≤–∞–µ—Ç —ç—Ç–æ—Ç —Å–ø–∏—Å–æ–∫ –Ω–∞ –º–∏–Ω–∏-–ø–∞–∫–µ—Ç—ã —Ä–∞–∑–º–µ—Ä–æ–º `BATCH_SIZE` –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∏—Ö –Ω–∞ GPU. GPU, –±–ª–∞–≥–æ–¥–∞—Ä—è —Å–≤–æ–µ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ, –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Å–æ—Ç–Ω–∏ —Ñ—Ä–∞–∑ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ, —á—Ç–æ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –∫–æ–ª–æ—Å—Å–∞–ª—å–Ω–æ–µ —É—Å–∫–æ—Ä–µ–Ω–∏–µ.
     - –ü—Ä–∏ –≤—ã–∑–æ–≤–µ –ø–µ—Ä–µ–≤–æ–¥—á–∏–∫–∞ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã (`max_length`, `no_repeat_ngram_size` –∏ –¥—Ä.), —á—Ç–æ–±—ã –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—Ç–∏—Ç—å "–≥–ª—é–∫–∏" –º–æ–¥–µ–ª–∏, —Ç–∞–∫–∏–µ –∫–∞–∫ –∑–∞—Ü–∏–∫–ª–∏–≤–∞–Ω–∏–µ –∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –±–µ—Å—Å–º—ã—Å–ª–µ–Ω–Ω–æ–≥–æ —Ç–µ–∫—Å—Ç–∞.
     - –†–µ–∑—É–ª—å—Ç–∞—Ç–æ–º —è–≤–ª—è–µ—Ç—Å—è —Å–ª–æ–≤–∞—Ä—å-–∫–∞—Ä—Ç–∞ –≤–∏–¥–∞ `{'–æ—Ä–∏–≥–∏–Ω–∞–ª': '–ø–µ—Ä–µ–≤–æ–¥'}`.
   - **–®–∞–≥ 3c: –ë–µ–∑–æ–ø–∞—Å–Ω–∞—è –∑–∞–º–µ–Ω–∞ —Ç–µ–∫—Å—Ç–∞.**
     - –î–ª—è –∫–∞–∂–¥–æ–π –∏—Å—Ö–æ–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏ –≤ —á–∞–Ω–∫–µ —Å–Ω–æ–≤–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ä–µ–≥—É–ª—è—Ä–Ω–æ–µ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ `RUSSIAN_PATTERN`, –Ω–æ –Ω–∞ —ç—Ç–æ—Ç —Ä–∞–∑ —Å —Ñ—É–Ω–∫—Ü–∏–µ–π `re.sub()`.
     - –î–ª—è –∫–∞–∂–¥–æ–≥–æ –Ω–∞–π–¥–µ–Ω–Ω–æ–≥–æ —Ä—É—Å—Å–∫–æ–≥–æ —Ñ—Ä–∞–≥–º–µ–Ω—Ç–∞ `re.sub` –≤—ã–∑—ã–≤–∞–µ—Ç callback-—Ñ—É–Ω–∫—Ü–∏—é `replace_callback`, –∫–æ—Ç–æ—Ä–∞—è —Å–º–æ—Ç—Ä–∏—Ç –≤ —Å–æ–∑–¥–∞–Ω–Ω—ã–π —Ä–∞–Ω–µ–µ —Å–ª–æ–≤–∞—Ä—å –∏ –ø–æ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π –ø–µ—Ä–µ–≤–æ–¥.
     - –≠—Ç–æ—Ç –ø–æ–¥—Ö–æ–¥ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç, —á—Ç–æ –∑–∞–º–µ–Ω—è—é—Ç—Å—è **—Ç–æ–ª—å–∫–æ** —Ä—É—Å—Å–∫–∏–µ —Å–ª–æ–≤–∞, –∞ –≤–µ—Å—å –æ–∫—Ä—É–∂–∞—é—â–∏–π –∫–æ–¥, –∑–Ω–∞–∫–∏ –ø—É–Ω–∫—Ç—É–∞—Ü–∏–∏ –∏ —Ä–∞–∑–º–µ—Ç–∫–∞ –æ—Å—Ç–∞—é—Ç—Å—è –Ω–µ—Ç—Ä–æ–Ω—É—Ç—ã–º–∏.
   - **–®–∞–≥ 3d: –í–æ–∑–≤—Ä–∞—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞.**
     - –§—É–Ω–∫—Ü–∏—è –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `DataFrame` —Å —É–∂–µ –ø–µ—Ä–µ–≤–µ–¥–µ–Ω–Ω—ã–º —Ç–µ–∫—Å—Ç–æ–º.

**4. –ó–∞–ø–∏—Å—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –∏ –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏–µ (`main`)**
   - –û–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–π `DataFrame` –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –≤ –≤—ã—Ö–æ–¥–Ω–æ–π —Ñ–∞–π–ª —Å –ø–æ–º–æ—â—å—é –º–µ—Ç–æ–¥–∞ `.to_csv()`. –≠—Ç–æ—Ç –º–µ—Ç–æ–¥ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –±–æ–ª—å—à–∏–º–∏ –¥–∞–Ω–Ω—ã–º–∏ –∏ –Ω–µ –≤—ã–∑—ã–≤–∞–µ—Ç –æ—à–∏–±–æ–∫ –Ω–µ—Ö–≤–∞—Ç–∫–∏ –ø–∞–º—è—Ç–∏, —Ç–∞–∫ –∫–∞–∫ –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –Ω–∞ –¥–∏—Å–∫ –ø–æ—Ä—Ü–∏—è–º–∏, –∞ –Ω–µ —Å–æ–∑–¥–∞–µ—Ç –æ–¥–∏–Ω –≥–∏–≥–∞–Ω—Ç—Å–∫–∏–π –æ–±—ä–µ–∫—Ç –≤ –ø–∞–º—è—Ç–∏.
   - –§–∞–π–ª –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –≤ —Ä–µ–∂–∏–º–µ –¥–æ–∑–∞–ø–∏—Å–∏ (`mode='a'`), –ø–æ—ç—Ç–æ–º—É –∫–∞–∂–¥—ã–π –Ω–æ–≤—ã–π –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–π —á–∞–Ω–∫ –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –≤ –∫–æ–Ω–µ—Ü —Ñ–∞–π–ª–∞.
   - –ü—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä `tqdm` –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è, –∏ —Ü–∏–∫–ª –ø–æ–≤—Ç–æ—Ä—è–µ—Ç—Å—è –¥–ª—è —Å–ª–µ–¥—É—é—â–µ–≥–æ —á–∞–Ω–∫–∞, –ø–æ–∫–∞ –≤–µ—Å—å –∏—Å—Ö–æ–¥–Ω—ã–π —Ñ–∞–π–ª –Ω–µ –±—É–¥–µ—Ç –ø—Ä–æ—á–∏—Ç–∞–Ω.

---

# Script for Batch RU‚ÜíEN Translation in CSV Files Using AI/Neural Networks  
*(–†—É—Å—Å–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –≤—ã—à–µ)*  

üá¨üáß This README is first in Russian, scroll up for details.  

Here‚Äôs a clear English translation of your text, adapted to look natural in a GitHub README:

---

# Script for Batch RU‚ÜíEN Translation in CSV Files Using AI/Neural Networks

This script is designed to automatically translate Russian text into English inside large CSV files. It is optimized to handle files hundreds of megabytes in size and millions of rows, efficiently utilizing GPU resources to speed up the process.

## Key Features

* **Large file processing:** Reads the input file in chunks, allowing translation of files larger than available system memory.
* **GPU acceleration:** Uses PyTorch and Hugging Face Transformers to run computations on an NVIDIA GPU (CUDA), greatly accelerating translation.
* **Batching:** Collects unique phrases and translates them in large batches for maximum GPU efficiency.
* **Smart text extraction:** Uses regular expressions to detect and translate only Russian text fragments, leaving code, markup, and other symbols intact.
* **Robust output writing:** Optimized CSV writing methods prevent `MemoryError` during the final write stage.
* **Configurable:** Core parameters like chunk size and batch size are adjustable in a dedicated configuration block.

## Requirements

Python 3.x is required, along with the dependencies listed in `requirements.txt`. Install them with:

```bash
pip install -r requirements.txt
```

**Important:** To use GPU acceleration, you need an NVIDIA GPU and a compatible CUDA version for PyTorch. For CUDA support, install Torch with:

```bash
pip install torch torchvision torchaudio --index-url https://download.pytorch.org/whl/cu118
```

## Configuration

All key parameters are defined at the top of the script:

* `MODEL_NAME`: Hugging Face model name (default: `Helsinki-NLP/opus-mt-ru-en`).
* `INPUT_FILE`: Input CSV file.
* `OUTPUT_FILE`: Output CSV file.
* `INPUT_ENCODING` / `OUTPUT_ENCODING`: File encodings.
* `CHUNK_SIZE`: **Number of rows** read from the input file per iteration. Balances CPU and RAM usage.
* `BATCH_SIZE`: **Number of phrases** processed per GPU batch. Balances GPU VRAM usage.
* `LOG_FILE` / `LOG_LEVEL`: Logging configuration.
* `USE_GPU`: `True` to enable GPU, `False` to force CPU.

## Usage

1. Adjust the configuration block in the script.
2. Place your source `input.csv` in the same directory.
3. Run the script:

   ```bash
   python run_translator.py
   ```
4. A progress bar will track progress. The translated output will be saved to `OUTPUT_FILE`.

## How It Works

**1. Initialization and model loading (`main`, `load_model`)**

* Sets up logging.
* Detects GPU availability.
* Loads the translation model (`Helsinki-NLP/opus-mt-ru-en`) and tokenizer with Hugging Face `transformers`.
* Creates a `pipeline` object to handle tokenization, translation, and post-processing.

**2. Reading the file in chunks (`main`)**

* Iteratively reads the CSV file in chunks (`CHUNK_SIZE`) using `itertools.islice`.
* Each chunk is converted into a `pandas.DataFrame` for processing.

**3. Processing a chunk (`process_chunk`)**

* **Step 3a: Extracting and deduplicating phrases**

  * Uses regex to find Cyrillic fragments in each row.
  * Stores unique phrases in a Python `set` to avoid duplicate translations.
* **Step 3b: Batch translation on GPU**

  * Passes unique phrases to the `translator` pipeline.
  * Processes them in batches (`BATCH_SIZE`) on GPU.
  * Creates a mapping dictionary `{original: translation}`.
* **Step 3c: Safe text replacement**

  * Uses regex substitution with a callback to replace only Russian fragments while preserving surrounding code/markup.
* **Step 3d: Returning the result**

  * Returns a translated `DataFrame`.

**4. Writing results (`main`)**

* Saves translated data to CSV using `.to_csv()` in append mode.
* Writes data in streaming mode to avoid memory issues.
* Updates progress bar until the entire input file is processed.

---
